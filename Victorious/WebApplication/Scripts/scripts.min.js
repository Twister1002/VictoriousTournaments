jQuery(document).ready(function(){var e=jQuery;e(".datepicker").datepicker().prop("readonly",!0),e(".timepicker").prop("readonly",!1).timepicker({className:"timepicker",disableTextInput:!0,disableTouchKeyboard:!0,step:15,timeFormat:"g:i a"}),e("#RegistrationStartDate").on("change",function(){e("#RegistrationEndDate").datepicker("option","minDate",new Date(e(this).val())),e("#TournamentStartDate").datepicker("option","minDate",new Date(e(this).val())),e("#TournamentEndDate").datepicker("option","minDate",new Date(e(this).val()))}),e("#RegistrationEndDate").on("change",function(){e("#TournamentStartDate").datepicker("option","minDate",new Date(e(this).val())),e("#TournamentEndDate").datepicker("option","minDate",new Date(e(this).val()))}),e("#TournamentStartDate").on("change",function(){e("#TournamentEndDate").datepicker("option","minDate",new Date(e(this).val()))})});
jQuery(document).ready(function(c){c(".accountMenu .menu").on("click",function(){c(this).addClass("active").siblings().removeClass("active"),c("#Account"+c(this).data("type")).addClass("active").siblings().removeClass("active")}),function(){1==c(".accountMenu").length&&c(".accountMenu .active").click()}()});
jQuery(document).ready(function(){function c(){$brackets=e(this).closest(".list-table-body"),e.ajax({url:"/Ajax/Administrator/Bracket",type:"post",data:{bracketTypeId:e(this).closest(".bracket").data("id")},dataType:"json",beforeSend:function(){$brackets.find(".icon").off("click")},success:function(c){(c=JSON.parse(c)).status&&e.each(c.brackets,function(c,o){$icon=e("#AdministratorBrackets .bracket[data-id='"+o.BracketTypeID+"'] .icon"),$icon.removeClass(),o.IsActive?$icon.addClass("green icon icon-checkmark"):$icon.addClass("red icon icon-cross")}),console.log(c.message)},error:function(c){console.log(c)},complete:function(){$brackets.find(".icon").on("click",c)}})}var e=jQuery;e("#AdministratorBrackets .bracket .icon").on("click",c)});
jQuery(document).ready(function(){function t(){a({function:"add",title:i("#AdministratorGames .form .gameTitle .field").val()})}function e(){a({function:"delete",title:i(this).siblings(".gameTitle").text(),gameid:i(this).closest(".game").data("gameid")})}function a(t){i.ajax({url:"/Ajax/Administrator/Games",type:"POST",data:{jsonData:JSON.stringify(t)},dataType:"json",beforeSend:function(){i("#AdministratorGames .gameDelete").off("click"),i("#AdministratorGames .GameAddButton").attr("disabled",!0)},success:function(t){if((t=JSON.parse(t)).status){var e=i("#AdministratorGames .list-table-body");e.empty(),i.each(t.data,function(t,a){html="<ul class='game' data-columns='2' data-gameid='"+a.GameTypeID+"'>",html+="<li class='column gameTitle'>"+a.Title+"</li>",html+="<li class='column gameDelete'><span class='icon icon-cross'></span></li>",html+="</ul>",e.append(html)}),i(".gameTitle input").val("")}console.log(t.message)},error:function(t){t=JSON.parse(t),console.log("Failure"),console.log(t)},complete:function(){i("#AdministratorGames .gameDelete").on("click",e),i("#AdministratorGames .GameAddButton").attr("disabled",!1)}})}var i=jQuery;i("#AdministratorGames");i("#AdministratorGames .gameDelete").on("click",e),i("#AdministratorGames .GameAddButton").on("click",t),i("#AdministratorGames .options .gameTitle").on("keydown",function(e){e&&13==e.keyCode&&t()})});
jQuery(document).ready(function(){function t(){a({Platform:i.find(".options .platformTitle").val(),action:"add"})}function o(){a({PlatformId:l(this).closest("ul").data("id"),action:"delete"})}function a(t){l.ajax({url:"/Ajax/Administrator/Platform",type:"post",data:{jsonData:JSON.stringify(t)},dataType:"json",beforeSend:function(){i.find(".options .AddPlatform").attr("disabled",!0),i.find(".options .platformTitle").attr("disabled",!0)},success:function(t){t=JSON.parse(t),console.log(t);var a=l("#AdministratorPlatforms .list-table-body");a.empty(),l.each(t.platforms,function(t,o){html="<ul class='platform' data-columns='2' data-id='"+o.PlatformID+"'>",html+="<li class='column'>"+o.PlatformName+"</li>",html+="<li class='column'><span class='icon icon-cross removePlatform'></span></li>",html+="</ul>",a.append(html)}),i.find(".options .platformTitle").val(""),a.find(".removePlatform").off("click").on("click",o)},error:function(t){console.log(t)},complete:function(){i.find(".options .AddPlatform").attr("disabled",!1),i.find(".options .platformTitle").attr("disabled",!1)}})}var l=jQuery,i=l("#AdministratorPlatforms");l("#AdministratorPlatforms .platform .removePlatform").on("click",o),l("#AdministratorPlatforms .options .AddPlatform").on("click",t),l("#AdministratorPlatforms .options .platformTitle").on("keydown",function(o){o&&13==o.keyCode&&t()})});
jQuery(document).ready(function(){function e(){a("#TournamentCreate .bracketInfo").addClass("hide"),a("."+n[a("#TournamentCreate #BracketType").val()]).removeClass("hide")}var r,a=jQuery,n={3:"rr",6:"swiss"},t=0;a("#TournamentCreate #BracketType").on("change",e),a("#TournamentCreate .icon-plus").on("click",function(){var e=r.replace(/%n%/g,t);a("#TournamentCreate .brackets").append(e),t++}),function(a){1==a("#TournamentCreate").length&&(e(),r=a("#TournamentCreate .bracketOrig").removeClass("hide").html(),a("#TournamentCreate .bracketOrig").remove())}(a)});
jQuery(document).ready(function(){function e(){var e=r(this).data("id");e>-1&&r(".TournamentMatch .defender[data-id='"+e+"'], .TournamentMatch .challenger[data-id='"+e+"']").addClass("teamHover")}function a(){var e=r(this).data("id");e>-1&&r(".TournamentMatch .defender[data-id='"+e+"'], .TournamentMatch .challenger[data-id='"+e+"']").removeClass("teamHover")}function n(e,a){overview=a.find(".overview"),games=a.find(".TournamentGames"),overview.find(".defender .name").text(e.defender.name),overview.find(".defender .score").text(e.defender.score),overview.find(".defender").attr("data-id",e.defender.id).data("id",e.defender.id),overview.find(".challenger .name").text(e.challenger.name),overview.find(".challenger .score").text(e.challenger.score),overview.find(".challenger").attr("data-id",e.challenger.id).data("id",e.challenger.id),games.find(".defender.name").text(e.defender.name),games.find(".challenger.name").text(e.challenger.name),games.find(".games").empty(),r.each(e.games,function(e,a){t(a,games)}),e.ready?a.find(".details").removeClass("hide"):a.find(".details").addClass("hide")}function t(n,t){html="<ul class='form gameDetail' data-columns='4' data-gameid='"+n.id+"' data-gamenum='"+n.gameNum+"'> ",html+="<li class='column game-number'>"+n.gameNum+"</li> ",html+="<li class='column defender score' data-id='"+n.defender.id+"'><input type='text' class='defender-score' name='defender-score' maxlength='3' value='"+n.defender.score+"' /></li> ",html+="<li class='column challenger score' data-id='"+n.challenger.id+"'><input type='text' class='challenger-score' name='challenger-score' maxlength='3' value='"+n.challenger.score+"' /></li> ",html+="<li class='column'><span class='icon icon-bin removeGame'></span></li> ",html+="</ul> ",t.find(".games").append(html),r(".TournamentMatch .defender, .TournamentMatch .challenger").off("mouseover").on("mouseover",e),r(".TournamentMatch .defender, .TournamentMatch .challenger").off("mouseleave").on("mouseleave",a),r(".TournamentMatch .removeGame").off("click").on("click",s)}function d(e){return!(e.find(".games ul").length>=e.find(".games").data("max"))}function o(e,a){d(a)?a.find(".options .add-game").removeClass("hide"):a.find(".options .add-game").addClass("hide"),e.finished?(a.find(".update-games").addClass("hide"),a.find(".options .add-game").addClass("hide")):a.find(".update-games").removeClass("hide")}function s(){var e=r(this).closest("ul"),a={bracketId:e.closest(".bracket").data("id"),matchId:e.closest(".TournamentMatch").data("id"),matchNum:e.closest(".TournamentMatch").data("matchnum"),gameId:e.data("gameid"),gameNum:e.data("gamenum")};r.ajax({url:"/Ajax/Match/RemoveGame",type:"post",data:{jsonData:JSON.stringify(a)},dataType:"json",beforeSend:function(){},success:function(a){a=JSON.parse(a),console.log(a),a.status?(UpdateStandings(r("#Tournament").data("id"),e.closest(".bracket").data("bracketnum")),r.each(a.data,function(e,a){$match=r(".TournamentMatch[data-id='"+a.matchId+"']"),n(a,$match),o(a,$match),$games=$match.find(".TournamentGames"),$games.find(".games").empty(),r.each(a.games,function(e,a){t(a,$games)})})):console.log(a.message)},error:function(e){console.log(e)},complete:function(){}})}var r=jQuery;r(".TournamentMatch .defender, .TournamentMatch .challenger").on("mouseover",e),r(".TournamentMatch .defender, .TournamentMatch .challenger").on("mouseleave",a),r(".TournamentGames .removeGame").on("click",s),r(".TournamentGames .options .close").on("click",function(){r(this).closest(".TournamentGames").removeClass("open")}),r(".TournamentGames .options .add-game").on("click",function(){var e=r(this).closest(".TournamentGames"),a=(e.data("max"),e.find(".list-table-body ul").length),n=r(e.find(".games ul")[a-1]).data("gamenum")+1;jsonData={id:-1,gameNum:isNaN(n)?1:n,challenger:{score:""},defender:{score:""}},t(jsonData,e),d(e)?r(this).removeClass("hide"):r(this).addClass("hide")}),r(".TournamentMatch .details").on("click",function(){var e=r(this).closest(".TournamentMatch"),a={matchId:r(e).data("id")};r.ajax({url:"/Ajax/Match",type:"POST",data:{jsonData:JSON.stringify(a)},dataType:"json",beforeSend:function(){r(".TournamentInfo, .TournamentGames").removeClass("open"),e.find(".TournamentGames").addClass("open"),e.find(".TournamentGames .list-table-body").empty()},success:function(a){(a=JSON.parse(a)).status?(console.log(a),$games=e.find(".TournamentGames"),n(a.data,e),o(a.data,$games)):console.log(a.message)},error:function(a){a=JSON.parse(a),console.log(a),e.find(".TournamentGames").removeClass("open")},complete:function(){}})}),r(".TournamentGames .update-games").on("click",function(){var e=r(this).closest(".TournamentMatch"),a=e.find(".games ul"),t=new Array;r.each(a,function(e,a){defenderScore=r(a).find(".defender-score").val(),challengerScore=r(a).find(".challenger-score").val(),defenderScoreValid=r.isNumeric(defenderScore)||Math.floor(defenderScore)!=defenderScore,challengerScoreValue=r.isNumeric(challengerScore)||Math.floor(challengerScore)!=challengerScore,defenderScoreValid&&challengerScoreValue?r(a).find(".score").removeClass("invalid"):r(a).find(".score").addClass("invalid")});var d={matchId:e.data("id"),matchNum:e.data("matchnum"),bracketNum:r(this).closest(".bracket").data("bracketnum"),tournamentId:r("#Tournament").data("id")};r.each(a,function(e,a){t.push({GameNumber:r(a).data("gamenum"),DefenderScore:r(a).find(".defender-score").val(),ChallengerScore:r(a).find(".challenger-score").val()})}),r.ajax({url:"/Ajax/Match/Update",type:"POST",data:{jsonIds:JSON.stringify(d),games:t},dataType:"json",beforeSend:function(){e.find(".TournamentGames .update-games").attr("disabled",!0)},success:function(a){if((a=JSON.parse(a)).status){console.log(a.message);var t=null;if(a.data.refresh)return void window.location.reload();r.each(a.data.matchUpdates,function(a,d){e.data("id")==d.matchId&&d.finished&&e.find(".TournamentGames").removeClass("open"),n(d,t=r(".TournamentMatch[data-id='"+d.matchId+"']")),o(d,t.find(".TournamentGames"))}),UpdateStandings(d.tournamentId,d.bracketNum)}else console.log("Error in updating");console.log(a)},error:function(e){console.log(e)},complete:function(){e.find(".TournamentGames .update-games").attr("disabled",!1)}})}),r(".TournamentGames .options .reset-match").on("click",function(){var e=r(this).closest(".TournamentMatch");r(this).closest(".bracket").data("id"),e.data("matchnum");r.ajax({url:"/Ajax/Bracket/MatchReset",type:"post",data:{bracketId:r(this).closest(".bracket").data("id"),matchNum:e.data("matchnum")},dataType:"json",success:function(a){(a=JSON.parse(a)).status&&(r.each(a.data,function(a,t){n(t,r(".TournamentMatch[data-id='"+t.matchId+"']")),t.matchNum==e.data("matchnum")&&o(t,e.find(".TournamentGames"))}),e.find(".TournamentGames .games").empty(),UpdateStandings(r("#Tournament").data("id"),e.closest(".bracket").data("id"))),console.log(a.message)},error:function(e){console.log(e)}})})});
jQuery(document).ready(function(){$(".clearButton").on("click",function(){$("#TournamentSearch .options .field").each(function(n,l){$(l).val("")}),$("#TournamentSearch .options .searchButton").click()}),$("#TournamentSearch .options .searchButton").on("click",function(){var n={};$("#TournamentSearch .options .field").each(function(l,t){n[$(t).attr("name")]=$(t).val()}),$.ajax({url:"/Ajax/Tournament/Search",type:"post",data:{searchData:JSON.stringify(n)},dataType:"json",success:function(n){n=JSON.parse(n);var l=$("#TournamentSearch .list-table-body");l.empty(),$.each(n,function(n,t){html="<a class='column' href='"+t.link+"'> ",html+="<ul class='column-clickable' data-columns='5'> ",html+="<li class='column'>"+t.title+"</li> ",html+="<li class='column'>"+t.game+"</li> ",html+="<li class='column'>"+t.platform+"</li> ",html+="<li class='column'>"+t.startDate+"</li> ",html+="<li class='column'>"+(t.publicRegistration?"Public":"Private")+"</li> ",html+="</ul> ",html+="</a> ",l.append(html)}),console.log(n)},error:function(n){console.log(n)}})}),function(n){n("#TournamentSearch .options").each(function(l,t){n(t).find("input").val(""),n(t).find("select").val("")})}($)});
function UpdateStandings(e,n){if(e=parseInt(e,10),n=parseInt(n,10),isNaN(e)||isNaN(n))return!1;$.ajax({url:"/Ajax/Bracket/Standings",type:"POST",data:{tournamentId:e,bracketNum:n},dataType:"json",success:function(e){if((e=JSON.parse(e)).status){var t=$(".TournamentInfo .bracketData[data-bracket='"+n+"'] .standingInfo");t.find(".data").remove(),$.each(e.data.ranks,function(n,a){html="<ul class='data' data-columns='3'> ",html+="<li class='column rank'>"+a.Rank+"</li> ",html+="<li class='column name'>"+a.Name+"</li> ",e.data.usePoints?html+="<li class='column score'>"+a.Wins+" - "+a.Losses+" - "+a.Ties+"</li> ":html+="<li class='column score'></li> ",html+="</ul> ",t.append(html)})}console.log(e.message)},error:function(e){console.log(e)}})}jQuery(document).ready(function(){function e(){var e=l(this).data("bracket");l(".TournamentInfo .bracketData, .TournamentInfo .bracketNum").removeClass("show"),l(this).addClass("show"),l(this).siblings(".TournamentInfo .bracketData[data-bracket='"+e+"']").addClass("show")}function n(){var e=l(this).closest(".bracketData"),n=l(this).data("show");l(this).addClass("show").siblings().removeClass("show"),e.find("."+n).addClass("show").siblings().removeClass("show")}function t(){var e=l(this);l.ajax({url:"/Ajax/Tournament/CheckIn",type:"post",data:{tournamentId:l("#Tournament").data("id"),tournamentUserId:l(this).closest(".data").data("user")},dataType:"json",beforeSend:function(){e.off("click")},success:function(n){(n=JSON.parse(n)).status&&(e.removeClass("green"),e.removeClass("red"),e.addClass(n.isCheckedIn?"green":"red")),console.log(n.message)},error:function(e){console.log(e)},complete:function(){e.on("click",t)}})}function a(e,n){userElement=l(this).closest(".user"),jsonData={TournamentId:l("#Tournament").data("id"),targetUser:userElement.data("user"),action:n||l(this).attr("class")},-1==jsonData.targetUser?userElement.remove():l.ajax({url:"/Ajax/Tournament/PermissionChange",type:"POST",data:jsonData,dataType:"json",beforeSend:function(){userElement.find(".actions").find("button").attr("disabled",!0),userElement.find(".promote").off("click"),userElement.find(".demote").off("click")},success:function(e){(e=JSON.parse(e)).status&&(0==e.data.permissions.Permission?userElement.remove():(userElement.find(".actions").html(o(e.data.permissions)),userElement.find(".permission").text(d[e.data.permissions.Permission]),userElement.find(".checkedIn").removeClass("red green").addClass(e.data.isCheckedIn?"green":"red"))),console.log(e)},error:function(e){alert(e.message)},complete:function(){userElement.find(".promote, .demote").on("click",a),userElement.find(".actions").find("button").attr("disabled",!1)}})}function o(e){return html="",demoteButton=" <button class='demote'>Demote</button> ",promoteButton=" <button class='promote'>Promote</button> ",removeButton=" <button class='remove'>Remove</button> ",e.Promote&&(html+=promoteButton),e.Demote&&(html+=demoteButton),e.Remove&&(html+=removeButton),html}function s(e){$this=l(e?e:this);var n=$this.closest(".userAddData");if(n.find(".name input").val().length<1)return!1;var t={tournamentId:l("#Tournament").data("id"),name:n.find(".name input").val(),bracketId:n.closest(".bracketData").data("id")};l.ajax({url:"/Ajax/Tournament/Register",type:"post",data:t,dataType:"json",beforeSend:function(){n.find(".addUserButton").attr("disabled",!0),n.find(".name input").attr("disabled",!0)},success:function(e){(e=JSON.parse(e)).status&&(html="<ul class='data user form' data-user='"+e.data.user.TournamentUserId+"' data-columns='5'> ",html+="<li class='column name'>"+e.data.user.Name+"</li> ",html+="<li class='column permission'>"+d[e.data.user.Permission]+"</li> ",html+="<li class='column seed'><input type='text' name='seedVal' maxlength='2' value='"+e.data.user.Seed+"'/></li>",html+="<li class='column'><span class='icon icon-checkmark red'></span></li> ",html+="<li class='column actions'>"+o(e.data.actions)+"</li> ",html+="</ul> ",n.closest(".infoSection").find(".user:last").after(html),n.find(".name input").val(""),l(".TournamentInfo .user .actions .remove").off("click"),l(".TournamentInfo .user .actions .remove").on("click",a)),u=!0,console.log(e.message)},error:function(e){console.log(e)},complete:function(){n.find(".addUserButton").attr("disabled",!1),n.find(".name input").attr("disabled",!1),n.find(".name input").focus()}})}function r(){for(var e=l(".TournamentInfo .playerInfo .user input").toArray(),n=[];0!=e.length;){var t=Math.floor(Math.random()*e.length);n.push(e[t]),e.splice(t,1)}l.each(n,function(e,n){l(n).val(e+1)})}function i(){var e={tournamentId:l("#Tournament").data("id"),bracketId:l(this).closest(".bracketData").data("id"),players:{}};l(this).closest(".playerInfo").find(".user").each(function(n,t){1==l(t).find(".seed input").length&&(e.players[l(t).data("user")]=l(t).find(".seed input").val())}),l.ajax({url:"/Ajax/Tournament/SeedChange",type:"POST",data:e,dataType:"json",success:function(e){(e=JSON.parse(e)).status&&(u=!0),console.log(e.message)},error:function(e){console.log("Error")}})}function c(){var e=l(this).closest(".bracketData").data("id");l.ajax({url:"/Ajax/Bracket/Reset",type:"POST",data:{bracketId:e},dataType:"json",success:function(e){(e=JSON.parse(e)).status?window.location.replace(e.redirect):alert(e.message)},error:function(e){console.log("Error")}})}var l=jQuery,u=!1,d={100:"Creator",101:"Admin",102:"Participant",0:"None"};l(".tournament-update").on("click",function(){window.location="/Tournament/Update/"+l(this).closest("#Tournament").data("id")}),l(".tournament-delete").on("click",function(){confirm("Are you sure you want to delete this tournament? This can no be reverted.")&&l.ajax({url:"/Ajax/Tournament/Delete",type:"POST",data:{tournamentId:l(this).closest("#Tournament").data("id")},dataType:"json",success:function(e){(e=JSON.parse(e)).status?window.location.replace(e.redirect):alert(e.message)},error:function(e){e=JSON.parse(e),alert(e.message)}})}),l(".tournamentFinalizeButton").on("click",function(){var e={},n={tournyVal:l("#Tournament").data("id"),bracketVal:l(".bracket").data("bracketnum")};l.each(l(".header-rounds"),function(n,t){var a=1;l.each(l(t).find("li"),function(n,t){var o=l(t).data("type"),s=l(t).find(".bestOfMatches");s.length&&(e.hasOwnProperty(o)||(e[o]={}),e[o][a]=s.val(),a++)})}),l.ajax({url:"/Ajax/Tournament/Finalize",type:"POST",data:{jsonData:JSON.stringify(n),roundData:e},dataType:"json",success:function(e){e=JSON.parse(e),location.replace(e.redirect),console.log(e)},error:function(e){console.log(e)}})}),l("#Tournament .bracket .options .checkIn").on("click",function(){l.ajax({url:"/Ajax/Tournament/CheckIn",type:"post",data:{tournamentId:l("#Tournament").data("id")},dataType:"json",success:function(e){(e=JSON.parse(e)).status&&l("#Tournament .bracket .options .checkIn").remove(),console.log(e.message)},error:function(e){console.log(e)}})}),l("#Tournament  .tournamentData").on("click",function(){l(".TournamentGames").removeClass("open");var e=l(".TournamentInfo");e.hasClass("open")?e.removeClass("open"):e.addClass("open")}),l(".TournamentInfo .close").on("click",function(){l(this).closest(".TournamentInfo").removeClass("open"),u&&location.reload()}),l(".TournamentInfo .bracketNum").on("click",e),l(".TournamentInfo .selection.info").on("click",n),l(".TournamentInfo .playerInfo .checkIn").on("click",t),l(".TournamentInfo .playerInfo .user .promote, .TournamentInfo .playerInfo .user .demote").on("click",a),l(".TournamentInfo .playerInfo .userAddData .addUserButton").on("click",function(){s(this)}),l(".TournamentInfo .playerInfo .userAddData .name").on("keydown",function(e){13==e.keyCode&&s(this)}),l(".TournamentInfo .resetInfo .reset-bracket").on("click",c),l(".TournamentInfo .playerInfo .adminSettings .randomSeeds").on("click",r),l(".TournamentInfo .playerInfo .adminSettings .updateSeeds").on("click",i),function(e){if(1==e(".TournamentInfo").length){var n=e(".TournamentInfo .playerInfo .user .permission");e.each(n,function(n,t){e(t).text(d[e(t).text()])}),1==e(".TournamentInfo .bracketNum").length&&e(".TournamentInfo .bracketNum")[0].click()}}(l)});
jQuery(document).ready(function(){function e(){n("#TournamentEdit .bracketInfo").addClass("hide"),n("."+t[n("#TournamentEdit #BracketType").val()]).removeClass("hide")}var n=jQuery,t={3:"rr",6:"swiss"};n("#TournamentEdit #BracketType").on("change",e),function(n){1==n("#TournamentEdit").length&&e()}(n)});
!function($){function Timepicker(){this.debug=!0,this._curInst=null,this._disabledInputs=[],this._timepickerShowing=!1,this._inDialog=!1,this._dialogClass="ui-timepicker-dialog",this._mainDivId="ui-timepicker-div",this._inlineClass="ui-timepicker-inline",this._currentClass="ui-timepicker-current",this._dayOverClass="ui-timepicker-days-cell-over",this.regional=[],this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"],closeButtonText:"Done",nowButtonText:"Now",deselectButtonText:"Deselect"},this._defaults={showOn:"focus",button:null,showAnim:"fadeIn",showOptions:{},appendText:"",beforeShow:null,onSelect:null,onClose:null,timeSeparator:":",periodSeparator:" ",showPeriod:!1,showPeriodLabels:!0,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:"now",myPosition:"left top",atPosition:"left bottom",onHourShow:null,onMinuteShow:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5,manual:[]},rows:4,showHours:!0,showMinutes:!0,optionalMinutes:!1,showCloseButton:!1,showNowButton:!1,showDeselectButton:!1,maxTime:{hour:null,minute:null},minTime:{hour:null,minute:null}},$.extend(this._defaults,this.regional[""]),this.tpDiv=$('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function extendRemove(e,t){$.extend(e,t);for(var i in t)null!=t[i]&&void 0!=t[i]||(e[i]=t[i]);return e}$.extend($.ui,{timepicker:{version:"0.3.3"}});var PROP_NAME="timepicker",tpuuid=(new Date).getTime();$.extend(Timepicker.prototype,{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachTimepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("time:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="tp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?(this._connectTimepicker(target,inst),this._setTimeFromField(inst)):inline&&this._inlineTimepicker(target,inst)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,inline:t,tpDiv:t?$('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>'):this.tpDiv}},_connectTimepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(e,i,s){t.settings[i]=s}).bind("getData.timepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t))},_doKeyDown:function(e){var t=$.timepicker._getInst(e.target),i=!0;if(t._keyEvent=!0,$.timepicker._timepickerShowing)switch(e.keyCode){case 9:$.timepicker._hideTimepicker(),i=!1;break;case 13:return $.timepicker._updateSelectedValue(t),$.timepicker._hideTimepicker(),!1;case 27:$.timepicker._hideTimepicker();break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.timepicker._showTimepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyUp:function(e){var t=$.timepicker._getInst(e.target);$.timepicker._setTimeFromField(t),$.timepicker._updateTimepicker(t)},_attachments:function(e,t){var i=this._get(t,"appendText"),s=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[s?"before":"after"](t.append)),e.unbind("focus.timepicker",this._showTimepicker),e.unbind("click.timepicker",this._adjustZIndex),t.trigger&&t.trigger.remove();var n=this._get(t,"showOn");if("focus"!=n&&"both"!=n||(e.bind("focus.timepicker",this._showTimepicker),e.bind("click.timepicker",this._adjustZIndex)),"button"==n||"both"==n){var r=this._get(t,"button");null==r&&(r=$('<button class="ui-timepicker-trigger" type="button">...</button>'),e.after(r)),$(r).bind("click.timepicker",function(){return $.timepicker._timepickerShowing&&$.timepicker._lastInput==e[0]?$.timepicker._hideTimepicker():t.input.is(":disabled")||$.timepicker._showTimepicker(e[0]),!1})}},_inlineTimepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.tpDiv).bind("setData.timepicker",function(e,i,s){t.settings[i]=s}).bind("getData.timepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setTimeFromField(t),this._updateTimepicker(t),t.tpDiv.show())},_adjustZIndex:function(e){e=e.target||e,$.timepicker._getInst(e).tpDiv.css("zIndex",$.timepicker._getZIndex(e)+1)},_showTimepicker:function(e){if("input"!=(e=e.target||e).nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.timepicker._isDisabledTimepicker(e)&&$.timepicker._lastInput!=e){$.timepicker._hideTimepicker();var t=$.timepicker._getInst(e);$.timepicker._curInst&&$.timepicker._curInst!=t&&$.timepicker._curInst.tpDiv.stop(!0,!0);var i=$.timepicker._get(t,"beforeShow");extendRemove(t.settings,i?i.apply(e,[e,t]):{}),t.lastVal=null,$.timepicker._lastInput=e,$.timepicker._setTimeFromField(t),$.timepicker._inDialog&&(e.value=""),$.timepicker._pos||($.timepicker._pos=$.timepicker._findPos(e),$.timepicker._pos[1]+=e.offsetHeight);var s=!1;$(e).parents().each(function(){return!(s|="fixed"==$(this).css("position"))});n={left:$.timepicker._pos[0],top:$.timepicker._pos[1]};if($.timepicker._pos=null,t.tpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.timepicker._updateTimepicker(t),!t.inline&&"object"==typeof $.ui.position){t.tpDiv.position({of:t.input,my:$.timepicker._get(t,"myPosition"),at:$.timepicker._get(t,"atPosition"),collision:"flip"});var n=t.tpDiv.offset();$.timepicker._pos=[n.top,n.left]}if(t._hoursClicked=!1,t._minutesClicked=!1,n=$.timepicker._checkOffset(t,n,s),t.tpDiv.css({position:$.timepicker._inDialog&&$.blockUI?"static":s?"fixed":"absolute",display:"none",left:n.left+"px",top:n.top+"px"}),!t.inline){var r=$.timepicker._get(t,"showAnim"),a=$.timepicker._get(t,"duration"),u=function(){$.timepicker._timepickerShowing=!0;var e=$.timepicker._getBorders(t.tpDiv);t.tpDiv.find("iframe.ui-timepicker-cover").css({left:-e[0],top:-e[1],width:t.tpDiv.outerWidth(),height:t.tpDiv.outerHeight()})};$.timepicker._adjustZIndex(e),$.effects&&$.effects[r]?t.tpDiv.show(r,$.timepicker._get(t,"showOptions"),a,u):t.tpDiv.show(r?a:null,u),r&&a||u(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.timepicker._curInst=t}}},_getZIndex:function(e){for(var t,i,s=$(e),n=0;s.length&&s[0]!==document;)"absolute"!==(t=s.css("position"))&&"relative"!==t&&"fixed"!==t||(i=parseInt(s.css("zIndex"),10),isNaN(i)||0===i||i>n&&(n=i)),s=s.parent();return n},_refreshTimepicker:function(e){var t=this._getInst(e);t&&this._updateTimepicker(t)},_updateTimepicker:function(e){e.tpDiv.empty().append(this._generateHTML(e)),this._rebindDialogEvents(e)},_rebindDialogEvents:function(e){var t=$.timepicker._getBorders(e.tpDiv),i=this;e.tpDiv.find("iframe.ui-timepicker-cover").css({left:-t[0],top:-t[1],width:e.tpDiv.outerWidth(),height:e.tpDiv.outerHeight()}).end().find(".ui-timepicker-minute-cell").unbind().bind("click",{fromDoubleClick:!1},$.proxy($.timepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:!0},$.proxy($.timepicker.selectMinutes,this)).end().find(".ui-timepicker-hour-cell").unbind().bind("click",{fromDoubleClick:!1},$.proxy($.timepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:!0},$.proxy($.timepicker.selectHours,this)).end().find(".ui-timepicker td a").unbind().bind("mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&$(this).removeClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&$(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){i._isDisabledTimepicker(e.inline?e.tpDiv.parent()[0]:e.input[0])||($(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&$(this).addClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&$(this).addClass("ui-timepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end().find(".ui-timepicker-now").bind("click",function(e){$.timepicker.selectNow(e)}).end().find(".ui-timepicker-deselect").bind("click",function(e){$.timepicker.deselectTime(e)}).end().find(".ui-timepicker-close").bind("click",function(e){$.timepicker._hideTimepicker()}).end()},_generateHTML:function(e){var t,i,s,n,r=1==this._get(e,"showPeriod"),a=1==this._get(e,"showPeriodLabels"),u=1==this._get(e,"showLeadingZero"),o=1==this._get(e,"showHours"),c=1==this._get(e,"showMinutes"),p=this._get(e,"amPmText"),l=this._get(e,"rows"),d=0,h=0,m=0,_=0,g=0,k=0,f=Array(),v=this._get(e,"hours"),$=null,b=0,T=this._get(e,"hourText"),w=this._get(e,"showCloseButton"),C=this._get(e,"closeButtonText"),D=this._get(e,"showNowButton"),I=this._get(e,"nowButtonText"),x=this._get(e,"showDeselectButton"),M=this._get(e,"deselectButtonText"),y=w||D||x;for(t=v.starts;t<=v.ends;t++)f.push(t);if($=Math.ceil(f.length/l),a){for(b=0;b<f.length;b++)f[b]<12?m++:_++;b=0,l!=(d=Math.floor(m/f.length*l))+(h=Math.floor(_/f.length*l))&&(m&&(!_||!d||h&&m/d>=_/h)?d++:h++),g=Math.min(d,1),k=d+1,$=0==d?Math.ceil(_/h):0==h?Math.ceil(m/d):Math.ceil(Math.max(m/d,_/h))}if(n='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr>',o){for(n+='<td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+T+'</div><table class="ui-timepicker">',i=1;i<=l;i++){for(n+="<tr>",i==g&&a&&(n+='<th rowspan="'+d.toString()+'" class="periods" scope="row">'+p[0]+"</th>"),i==k&&a&&(n+='<th rowspan="'+h.toString()+'" class="periods" scope="row">'+p[1]+"</th>"),s=1;s<=$;s++)a&&i<k&&f[b]>=12?n+=this._generateHTMLHourCell(e,void 0,r,u):(n+=this._generateHTMLHourCell(e,f[b],r,u),b++);n+="</tr>"}n+="</table></td>"}if(c&&(n+='<td class="ui-timepicker-minutes">',n+=this._generateHTMLMinutes(e),n+="</td>"),n+="</tr>",y){var N='<tr><td colspan="3"><div class="ui-timepicker-buttonpane ui-widget-content">';D&&(N+='<button type="button" class="ui-timepicker-now ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" >'+I+"</button>"),x&&(N+='<button type="button" class="ui-timepicker-deselect ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" >'+M+"</button>"),w&&(N+='<button type="button" class="ui-timepicker-close ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" >'+C+"</button>"),n+=N+"</div></td></tr>"}return n+="</table>"},_updateMinuteDisplay:function(e){var t=this._generateHTMLMinutes(e);e.tpDiv.find("td.ui-timepicker-minutes").html(t),this._rebindDialogEvents(e)},_generateHTMLMinutes:function(e){var t,s,n="",r=this._get(e,"rows"),a=Array(),u=this._get(e,"minutes"),o=null,c=0,p=1==this._get(e,"showMinutesLeadingZero"),l=this._get(e,"onMinuteShow"),d=this._get(e,"minuteText");for(u.starts||(u.starts=0),u.ends||(u.ends=59),u.manual||(u.manual=[]),t=u.starts;t<=u.ends;t+=u.interval)a.push(t);for(i=0;i<u.manual.length;i++){var h=u.manual[i];"number"!=typeof h||h<0||h>59||$.inArray(h,a)>=0||a.push(h)}if(a.sort(function(e,t){return e-t}),o=Math.round(a.length/r+.49),l&&0==l.apply(e.input?e.input[0]:null,[e.hours,e.minutes]))for(c=0;c<a.length;c+=1)if(t=a[c],l.apply(e.input?e.input[0]:null,[e.hours,t])){e.minutes=t;break}for(n+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+d+'</div><table class="ui-timepicker">',c=0,s=1;s<=r;s++){for(n+="<tr>";c<s*o;){var m="";void 0!==(t=a[c])&&(m=t<10&&p?"0"+t.toString():t.toString()),n+=this._generateHTMLMinuteCell(e,t,m),c++}n+="</tr>"}return n+="</table>"},_generateHTMLHourCell:function(e,t,i,s){var n=t;t>12&&i&&(n=t-12),0==n&&i&&(n=12),n<10&&s&&(n="0"+n);var r=!0,a=this._get(e,"onHourShow"),u=this._get(e,"maxTime"),o=this._get(e,"minTime");return void 0==t?'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>':(a&&(r=a.apply(e.input?e.input[0]:null,[t])),r&&(!isNaN(parseInt(u.hour))&&t>u.hour&&(r=!1),!isNaN(parseInt(o.hour))&&t<o.hour&&(r=!1)),r?'<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" data-hour="'+t.toString()+'"><a class="ui-state-default '+(t==e.hours?"ui-state-active":"")+'">'+n.toString()+"</a></td>":'<td><span class="ui-state-default ui-state-disabled '+(t==e.hours?" ui-state-active ":" ")+'">'+n.toString()+"</span></td>")},_generateHTMLMinuteCell:function(e,t,i){var s=!0,n=e.hours,r=this._get(e,"onMinuteShow"),a=this._get(e,"maxTime"),u=this._get(e,"minTime");return r&&(s=r.apply(e.input?e.input[0]:null,[e.hours,t])),void 0==t?'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>':(s&&null!==n&&(!isNaN(parseInt(a.hour))&&!isNaN(parseInt(a.minute))&&n>=a.hour&&t>a.minute&&(s=!1),!isNaN(parseInt(u.hour))&&!isNaN(parseInt(u.minute))&&n<=u.hour&&t<u.minute&&(s=!1)),s?'<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" data-minute="'+t.toString()+'" ><a class="ui-state-default '+(t==e.minutes?"ui-state-active":"")+'" >'+i+"</a></td>":'<td><span class="ui-state-default ui-state-disabled" >'+i+"</span></td>")},_destroyTimepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var s=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==s?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus.timepicker",this._showTimepicker).unbind("click.timepicker",this._adjustZIndex)):"div"!=s&&"span"!=s||t.removeClass(this.markerClassName).empty()}},_enableTimepicker:function(e){var t=$(e),i=t.attr("id"),s=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n){e.disabled=!1;var r=this._get(s,"button");$(r).removeClass("ui-state-disabled").disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end()}else if("div"==n||"span"==n){var a=t.children("."+this._inlineClass);a.children().removeClass("ui-state-disabled"),a.find("button").each(function(){this.disabled=!1})}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==i?null:e})}},_disableTimepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var s=e.nodeName.toLowerCase();if("input"==s){var n=this._get(i,"button");$(n).addClass("ui-state-disabled").disabled=!0,e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end()}else if("div"==s||"span"==s){var r=t.children("."+this._inlineClass);r.children().addClass("ui-state-disabled"),r.find("button").each(function(){this.disabled=!0})}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=t.attr("id")}},_isDisabledTimepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_checkOffset:function(e,t,i){var s=e.tpDiv.outerWidth(),n=e.tpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+$(document).scrollLeft(),o=document.documentElement.clientHeight+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?s-r:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+a?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+s>u&&u>s?Math.abs(t.left+s-u):0),t.top-=Math.min(t.top,t.top+n>o&&o>n?Math.abs(n+a):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType);)e=e[i?"previousSibling":"nextSibling"];var s=$(e).offset();return[s.left,s.top]},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkExternalClick:function(e){if($.timepicker._curInst){var t=$(e.target);t[0].id==$.timepicker._mainDivId||0!=t.parents("#"+$.timepicker._mainDivId).length||t.hasClass($.timepicker.markerClassName)||t.hasClass($.timepicker._triggerClass)||!$.timepicker._timepickerShowing||$.timepicker._inDialog&&$.blockUI||$.timepicker._hideTimepicker()}},_hideTimepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._timepickerShowing){var i=this._get(t,"showAnim"),s=this._get(t,"duration"),n=function(){$.timepicker._tidyDialog(t),this._curInst=null};$.effects&&$.effects[i]?t.tpDiv.hide(i,$.timepicker._get(t,"showOptions"),s,n):t.tpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?s:null,n),i||n(),this._timepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.tpDiv))),this._inDialog=!1;var r=this._get(t,"onClose");r&&r.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t])}},_tidyDialog:function(e){e.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(e){throw"Missing instance data for this timepicker"}},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setTimeFromField:function(e){if(e.input.val()!=e.lastVal){var t=this._get(e,"defaultTime"),i="now"==t?this._getCurrentTimeRounded(e):t;if(0==e.inline&&""!=e.input.val()&&(i=e.input.val()),i instanceof Date)e.hours=i.getHours(),e.minutes=i.getMinutes();else{var s=e.lastVal=i;if(""==i)e.hours=-1,e.minutes=-1;else{var n=this.parseTime(e,s);e.hours=n.hours,e.minutes=n.minutes}}$.timepicker._updateTimepicker(e)}},_optionTimepicker:function(e,t,i){var s=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.timepicker._defaults):s?"all"==t?$.extend({},s.settings):this._get(s,t):null;var n=t||{};"string"==typeof t&&((n={})[t]=i),s&&(extendRemove(s.settings,n),this._curInst==s&&(this._hideTimepicker(),this._updateTimepicker(s)),s.inline&&this._updateTimepicker(s))},_setTimeTimepicker:function(e,t){var i=this._getInst(e);i&&(this._setTime(i,t),this._updateTimepicker(i),this._updateAlternate(i,t))},_setTime:function(e,t,i){var s=e.hours,n=e.minutes;if(t instanceof Date)e.hours=t.getHours(),e.minutes=t.getMinutes();else{var t=this.parseTime(e,t);e.hours=t.hours,e.minutes=t.minutes}s==e.hours&&n==e.minutes||i||e.input.trigger("change"),this._updateTimepicker(e),this._updateSelectedValue(e)},_getCurrentTimeRounded:function(e){var t=new Date,i=t.getMinutes(),s=this._get(e,"minutes"),n=Math.round(i/s.interval)*s.interval;return t.setMinutes(n),t},parseTime:function(e,t){var i=new Object;if(i.hours=-1,i.minutes=-1,!t)return"";var s=this._get(e,"timeSeparator"),n=this._get(e,"amPmText"),r=this._get(e,"showHours"),a=this._get(e,"showMinutes"),u=this._get(e,"optionalMinutes"),o=1==this._get(e,"showPeriod"),c=t.indexOf(s);if(-1!=c?(i.hours=parseInt(t.substr(0,c),10),i.minutes=parseInt(t.substr(c+1),10)):!r||a&&!u?!r&&a&&(i.minutes=parseInt(t,10)):i.hours=parseInt(t,10),r){var p=t.toUpperCase();i.hours<12&&o&&-1!=p.indexOf(n[1].toUpperCase())&&(i.hours+=12),12==i.hours&&o&&-1!=p.indexOf(n[0].toUpperCase())&&(i.hours=0)}return i},selectNow:function(e){var t=$(e.target).attr("data-timepicker-instance-id"),i=$(t),s=this._getInst(i[0]),n=new Date;s.hours=n.getHours(),s.minutes=n.getMinutes(),this._updateSelectedValue(s),this._updateTimepicker(s),this._hideTimepicker()},deselectTime:function(e){var t=$(e.target).attr("data-timepicker-instance-id"),i=$(t),s=this._getInst(i[0]);s.hours=-1,s.minutes=-1,this._updateSelectedValue(s),this._hideTimepicker()},selectHours:function(e){var t=$(e.currentTarget),i=t.attr("data-timepicker-instance-id"),s=parseInt(t.attr("data-hour")),n=e.data.fromDoubleClick,r=$(i),a=this._getInst(r[0]),u=1==this._get(a,"showMinutes");if($.timepicker._isDisabledTimepicker(r.attr("id")))return!1;t.parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active"),t.children("a").addClass("ui-state-active"),a.hours=s;var o=this._get(a,"onMinuteShow"),c=this._get(a,"maxTime"),p=this._get(a,"minTime");return!o&&isNaN(parseInt(c.minute))&&isNaN(parseInt(p.minute))||this._updateMinuteDisplay(a),this._updateSelectedValue(a),a._hoursClicked=!0,(a._minutesClicked||n||0==u)&&$.timepicker._hideTimepicker(),!1},selectMinutes:function(e){var t=$(e.currentTarget),i=t.attr("data-timepicker-instance-id"),s=parseInt(t.attr("data-minute")),n=e.data.fromDoubleClick,r=$(i),a=this._getInst(r[0]),u=1==this._get(a,"showHours");return!$.timepicker._isDisabledTimepicker(r.attr("id"))&&(t.parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active"),t.children("a").addClass("ui-state-active"),a.minutes=s,this._updateSelectedValue(a),a._minutesClicked=!0,!(!a._hoursClicked&&!n&&0!=u)&&($.timepicker._hideTimepicker(),!1))},_updateSelectedValue:function(e){var t=this._getParsedTime(e);e.input&&(e.input.val(t),e.input.trigger("change"));var i=this._get(e,"onSelect");return i&&i.apply(e.input?e.input[0]:null,[t,e]),this._updateAlternate(e,t),t},_getParsedTime:function(e){if(-1==e.hours&&-1==e.minutes)return"";(e.hours<e.hours.starts||e.hours>e.hours.ends)&&(e.hours=0),(e.minutes<e.minutes.starts||e.minutes>e.minutes.ends)&&(e.minutes=0);var t="",i=1==this._get(e,"showPeriod"),s=1==this._get(e,"showLeadingZero"),n=1==this._get(e,"showHours"),r=1==this._get(e,"showMinutes"),a=1==this._get(e,"optionalMinutes"),u=this._get(e,"amPmText"),o=e.hours?e.hours:0,c=e.minutes?e.minutes:0,p=o||0,l="";-1==p&&(p=0),-1==c&&(c=0),i&&(0==e.hours&&(p=12),e.hours<12?t=u[0]:(t=u[1],p>12&&(p-=12)));var d=p.toString();s&&p<10&&(d="0"+d);var h=c.toString();return c<10&&(h="0"+h),n&&(l+=d),!n||!r||a&&0==h||(l+=this._get(e,"timeSeparator")),!r||a&&0==h||(l+=h),n&&t.length>0&&(l+=this._get(e,"periodSeparator")+t),l},_updateAlternate:function(e,t){var i=this._get(e,"altField");i&&$(i).each(function(e,i){$(i).val(t)})},_getTimeAsDateTimepicker:function(e){var t=this._getInst(e);return-1==t.hours&&-1==t.minutes?"":((t.hours<t.hours.starts||t.hours>t.hours.ends)&&(t.hours=0),(t.minutes<t.minutes.starts||t.minutes>t.minutes.ends)&&(t.minutes=0),new Date(0,0,0,t.hours,t.minutes,0))},_getTimeTimepicker:function(e){var t=this._getInst(e);return this._getParsedTime(t)},_getHourTimepicker:function(e){var t=this._getInst(e);return void 0==t?-1:t.hours},_getMinuteTimepicker:function(e){var t=this._getInst(e);return void 0==t?-1:t.minutes}}),$.fn.timepicker=function(e){$.timepicker.initialized||($(document).mousedown($.timepicker._checkExternalClick),$.timepicker.initialized=!0),0===$("#"+$.timepicker._mainDivId).length&&$("body").append($.timepicker.tpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"getTime"!=e&&"getTimeAsDate"!=e&&"getHour"!=e&&"getMinute"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.timepicker["_"+e+"Timepicker"].apply($.timepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.timepicker["_"+e+"Timepicker"].apply($.timepicker,[this].concat(t)):$.timepicker._attachTimepicker(this,e)}):$.timepicker["_"+e+"Timepicker"].apply($.timepicker,[this[0]].concat(t))},$.timepicker=new Timepicker,$.timepicker.initialized=!1,$.timepicker.uuid=(new Date).getTime(),$.timepicker.version="0.3.3",window["TP_jQuery_"+tpuuid]=$}(jQuery);