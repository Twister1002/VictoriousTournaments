@model WebApplication.Models.BracketViewModel

@{
    int rounds = Model.TotalRounds();
    int roundNum = 1;
    List<bool> upperDisplay = Model.RoundShowing(WebApplication.Models.BracketSection.UPPER);
    List<bool> lowerDisplay = Model.RoundShowing(WebApplication.Models.BracketSection.LOWER);
}

@{
    ViewBag.roundDisplay = upperDisplay;
    Html.RenderPartial("Brackets/Shared/_Header", Model, new ViewDataDictionary(ViewData));
}
<li class="list-table-body">
    <ul class="round border" data-columns="@rounds">
        @{ roundNum = 1; }
        @foreach (bool display in upperDisplay)
        {
            <li class="column">
                @if (display)
                {
                    foreach (var match in Model.Bracket.GetRound(roundNum))
                    {
                        Html.RenderPartial("Brackets/Shared/_Match", new WebApplication.Models.MatchViewModel(match), new ViewDataDictionary(ViewData));
                    }
                    roundNum++;
                }
            </li>
        }
    </ul>
</li>

@{ ViewBag.roundDisplay = lowerDisplay; Html.RenderPartial("Brackets/Shared/_Header", Model, new ViewDataDictionary(ViewData)); }
<li class="list-table-body">
    <ul class="round" data-columns="@rounds">
        @{ roundNum = 1; }
        @foreach (bool display in lowerDisplay)
        {
            <li class="column">
                @if (display)
                {
                    foreach (var match in Model.Bracket.GetLowerRound(roundNum))
                    {
                        Html.RenderPartial("Brackets/Shared/_Match", new WebApplication.Models.MatchViewModel(match), new ViewDataDictionary(ViewData));
                    }
                    roundNum++;
                }
            </li>
        }
    </ul>
</li>
<li class="list-table-body">
    <ul class="round" data-columns="@rounds">
        @for (int i = 1; i <= rounds; i++)
        {
            <li class="column">
                @if (i == rounds)
                {
                    ViewBag.isGrandFinal = true;
                    Html.RenderPartial("Brackets/Shared/_Match", new WebApplication.Models.MatchViewModel(Model.Bracket.GrandFinal), new ViewDataDictionary(ViewData));
                }
            </li>
        }
    </ul>
</li>