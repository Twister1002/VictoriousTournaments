@model WebApplication.Models.BracketViewModel

@{
    int rounds = Model.TotalRounds();
    var roundInfo = Model.RoundInfo();
    int roundNum = 0;
}

<li class="list-table-header bracket-header">
    <ul class="header-rounds" data-columns="@rounds">
        @foreach (bool display in ViewBag.roundDisplay)
        {
            <li class="column">
                @if (display)
                {
                    <div>Round @roundInfo[roundNum].roundNum</div>

                    if (!Model.Bracket.IsFinalized && ViewBag.isAdministrator)
                    {
                        <div>Best of @Html.DropDownList("bestOfMatches", Enumerable.Range(1, 9).Select(n => new SelectListItem() { Text = n.ToString(), Value = n.ToString() }), new { @class = "bestOfMatches" })</div>
                    }
                    else
                    {
                        <div>Best of @roundInfo[roundNum].bestOf</div>
                    }

                    roundNum++;
                }
            </li>
        }
        @if (Model.Bracket.BracketType == DatabaseLib.BracketType.DOUBLE && ViewBag.grandFinalShow)
        {
            <li class="column">
                <div>Round @roundInfo[rounds - 1].roundNum</div>

                @if (!Model.Bracket.IsFinalized && ViewBag.isAdministrator)
                {
                    <div>Best of @Html.DropDownList("bestOfMatches", Enumerable.Range(1, 9).Select(n => new SelectListItem() { Text = n.ToString(), Value = n.ToString() }), new { @class = "bestOfMatches" })</div>
                }
                else
                {
                    <div>Best of @roundInfo[rounds - 1].bestOf</div>
                }
            </li>
        }
    </ul>
</li>
